<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><title>W3C WebDriver</title><meta name="description" content="WebDriver client for JavaScript"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="W3C WebDriver"/><meta property="og:type" content="website"/><meta property="og:url" content="https://w3c-webdriver.netlify.com/"/><meta property="og:image" content="opengraph-969eb66c4ac46040a9e864d321e8e5ee.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:description" content="WebDriver client for JavaScript"/><meta name="theme-color" content="#7ac35f"/><style data-styled="elmAWQ hFjUra dhPuMI jcvskU eeuVlg bzsWuf koURsI ekGstm cQGkde XKgNx cGaljh dofKEl dLmUcp hogQlB bUHJIA gDTGaH wHKmQ fltzxZ idFeQr chxjBI dZJAAP gyVCXr bwxRPa jTfAdQ kzTKuX jsZMYE" data-styled-version="4.1.3">
/* sc-component-id: Footer__StyledHeart-sc-1ofq597-0 */
.kzTKuX{width:21px;height:21px;margin:7px;}
/* sc-component-id: Footer__StyledCH-sc-1ofq597-1 */
.jsZMYE{width:32px;height:32px;margin:7px;}
/* sc-component-id: Footer__StyledFooter-sc-1ofq597-2 */
.jTfAdQ{grid-area:footer;padding-top:50px;padding-bottom:50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .jTfAdQ > div{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
/* sc-component-id: Body-sc-1kose83-0 */
.elmAWQ{margin:0;padding:0;color:#000;background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;overflow-x:hidden;display:grid;grid-template-areas:' . main . toc' ' . footer . toc';grid-template-columns:minmax(20px,1fr) minmax(auto,840px) minmax(20px,1fr) 0;} @media (min-width:1100px){.elmAWQ{grid-template-columns:minmax(80px,1fr) minmax(auto,840px) minmax(80px,1fr) 330px;}}
/* sc-component-id: Heading__Anchor-oer6k3-0 */
.eeuVlg{-webkit-text-decoration:none;text-decoration:none;visibility:hidden;float:left;color:currentColor;} .eeuVlg:hover{-webkit-filter:contrast(0.1);filter:contrast(0.1);}
/* sc-component-id: Heading__StyledAnchorIcon-oer6k3-1 */
.bzsWuf{display:inline-block;width:.45em;height:.45em;margin-left:calc(-.3em - .45em);padding-right:.3em;-webkit-transform:translateY(-.12em);-ms-transform:translateY(-.12em);transform:translateY(-.12em);} .bzsWuf path{fill:currentColor;}
/* sc-component-id: Heading__StyledHeading1-oer6k3-2 */
.dhPuMI{font-size:40px;line-height:1.125;margin:40px 0;color:#282c34;} @media (min-width:780px){.dhPuMI{font-size:60px;margin:50px 0;}} @media (min-width:980px){.dhPuMI{margin-top:80px;}}
/* sc-component-id: Heading__StyledHeading2-oer6k3-3 */
.jcvskU{font-size:20px;margin:40px 0;color:#282c34;} .jcvskU:hover .Heading__Anchor-oer6k3-0{visibility:visible;} @media (min-width:980px){.jcvskU{font-size:24px;}} @media (min-width:1280px){.jcvskU{font-size:35px;}}
/* sc-component-id: Link-gk158-0 */
.ekGstm{-webkit-text-decoration:none;text-decoration:none;color:#337ab7;} .ekGstm:focus,.no-touchevents .ekGstm:hover{-webkit-filter:contrast(0.1);filter:contrast(0.1);-webkit-text-decoration:underline;text-decoration:underline;} .ekGstm:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px;}
/* sc-component-id: Code__CodeWrapper-picg8i-0 */
.XKgNx{margin:25px -20px;padding:0 18px;overflow:auto;font-size:14px;line-height:20px;background-color:#2d2d2d;} @media (min-width:894px){.XKgNx{margin-right:-18px;margin-left:-18px;border-radius:10px;}}
/* sc-component-id: Code__StyledSyntaxHighlighter-picg8i-1 */
.gDTGaH{margin:0 -0.5em;white-space:pre-wrap;word-break:break-word;} .gDTGaH .hljs-purple{color:#b4009e;} .gDTGaH .hljs-green{color:#11a10e;}
/* sc-component-id: Code__WindowButton-picg8i-2 */
.dLmUcp{width:14px;height:14px;border-radius:50%;background-color:#ff5f56;}.hogQlB{width:14px;height:14px;border-radius:50%;background-color:#ffbd2e;}.bUHJIA{width:14px;height:14px;border-radius:50%;background-color:#27c93f;}
/* sc-component-id: Code__WindowButtonsWrapper-picg8i-3 */
.dofKEl{position:absolute;top:0;bottom:0;display:grid;grid-column-gap:8px;grid-template-columns:repeat(3,auto);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
/* sc-component-id: Code__WindowTitle-picg8i-4 */
.cGaljh{color:white;font-weight:bold;text-align:center;position:relative;margin-top:12px;}
/* sc-component-id: InlineCode__StyledInlineCode-pe127r-0 */
.cQGkde{padding:2px 4px;border-radius:4px;background-color:#f7f7f7;font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:0.9em;}
/* sc-component-id: Paragraph__StyledParagraph-sc-1efu9re-0 */
.koURsI{max-width:42em;}
/* sc-component-id: TableOfContentsNode__Link-sc-19a47gy-0 */
.gyVCXr{color:inherit;-webkit-text-decoration:none;text-decoration:none;display:block;padding:10px;position:relative;-webkit-transition:filter .1s ease,background-color .1s ease;transition:filter .1s ease,background-color .1s ease;--active-dot-size:6px;} @media (min-width:720px){.gyVCXr{padding:5px 10px;}} .no-touchevents .gyVCXr:hover{-webkit-filter:contrast(0.1);filter:contrast(0.1);}.bwxRPa{color:inherit;-webkit-text-decoration:none;text-decoration:none;display:block;padding:10px;position:relative;-webkit-transition:filter .1s ease,background-color .1s ease;transition:filter .1s ease,background-color .1s ease;--active-dot-size:6px;font-weight:700;} @media (min-width:720px){.bwxRPa{padding:5px 10px;}} .no-touchevents .bwxRPa:hover{-webkit-filter:contrast(0.1);filter:contrast(0.1);}
/* sc-component-id: HomeLink__StyledHomeLink-sc-15k1ajn-0 */
.idFeQr{font-size:1.3em;-webkit-text-decoration:none;text-decoration:none;display:block;-webkit-transition:filter .1s ease;transition:filter .1s ease;color:#282c34;} .no-touchevents .idFeQr:hover{-webkit-filter:contrast(0.1);filter:contrast(0.1);}
/* sc-component-id: SearchField__Wrapper-l8gm09-0 */
.chxjBI{position:relative;} .chxjBI .algolia-autocomplete{width:100%;} .chxjBI .label{position:absolute;left:0;top:-500px;width:1px;height:1px;overflow:hidden;} .chxjBI .icon{position:absolute;top:50%;left:3px;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:20px;height:20px;z-index:1;} .chxjBI input{display:block;width:100%;box-sizing:border-box;background:white;border:0;color:inherit;font-size:18px;font-family:inherit;position:relative;padding:5px 5px 5px 29px;-webkit-appearance:none;-moz-appearance:none;outline-color:currentColor;}
/* sc-component-id: TableOfContents__Wrapper-wgfebw-0 */
.fltzxZ{position:fixed;top:0;left:0;right:0;display:grid;gap:15px;grid-template-rows:auto auto 1fr;padding:20px;-webkit-transition:-webkit-transform .15s ease;-webkit-transition:transform .15s ease;transition:transform .15s ease;-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);background-color:#f7f7f7;box-sizing:border-box;height:100vh;} @media (min-width:1100px){.fltzxZ{padding-top:60px;position:-webkit-sticky;position:sticky;box-shadow:none;-webkit-transform:none;-ms-transform:none;transform:none;font-size:13px;}} @media (min-width:2000px){}
/* sc-component-id: TableOfContents__Navigation-wgfebw-1 */
.dZJAAP{-webkit-flex:1;-ms-flex:1;flex:1;overflow-y:auto;line-height:initial;-webkit-scrollbar-width:thin;-moz-scrollbar-width:thin;-ms-scrollbar-width:thin;scrollbar-width:thin;} .dZJAAP::-webkit-scrollbar{width:3px;} .dZJAAP::-webkit-scrollbar-thumb{background:#c1c1c1;} .dZJAAP ol,.dZJAAP ul{list-style:none;margin:0;padding:0;} .dZJAAP li{margin:0;padding:0;} .dZJAAP > ol > li > ol > li a{padding-left:40px;}
/* sc-component-id: Site__Main-zzx35d-0 */
.hFjUra{line-height:1.7;grid-area:main;} @media (min-width:980px){.hFjUra{font-size:17px;}}
/* sc-component-id: Site__TableOfContentsContainer-zzx35d-1 */
.wHKmQ{grid-area:toc;}</style></head><body class="Body-sc-1kose83-0 elmAWQ"><main class="Site__Main-zzx35d-0 hFjUra"><article><h1 id="using-with-cucumber" class="Heading__StyledHeading1-oer6k3-2 dhPuMI">Using with Cucumber</h1><h2 id="getting-started" class="Heading__StyledHeading2-oer6k3-3 jcvskU"><a href="#getting-started" aria-hidden="true" class="Heading__Anchor-oer6k3-0 eeuVlg"><svg class="Heading__StyledAnchorIcon-oer6k3-1 bzsWuf" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#8899A6" d="M15 9l6-6s6-6 12 0 0 12 0 12l-8 8s-6 6-12 0c-1.125-1.125-1.822-2.62-1.822-2.62l3.353-3.348S14.396 18.396 16 20c0 0 3 3 6 0l8-8s3-3 0-6-6 0-6 0l-3.729 3.729s-1.854-1.521-5.646-.354L15 9z"></path><path fill="#8899A6" d="M20.845 27l-6 6s-6 6-12 0 0-12 0-12l8-8s6-6 12 0c1.125 1.125 1.822 2.62 1.822 2.62l-3.354 3.349s.135-1.365-1.469-2.969c0 0-3-3-6 0l-8 8s-3 3 0 6 6 0 6 0l3.729-3.729s1.854 1.521 5.646.354l-.374.375z"></path></svg></a>Getting Started</h2><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Before diving in technical steps we highly recommend to check out the <a href="https://docs.cucumber.io/guides/overview" class="Link-gk158-0 ekGstm">Cucumber introduction</a> page.</p><h3 id="step-1-installing-dependencies">Step 1 - Installing dependencies</h3><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Let&#x27;s start with installing all the dependencies. First we need to have Nightwatch.js and Cucumber.js to be installed locally. If you are new to Nightwatch.js you can read the <a href="http://nightwatchjs.org/guide" class="Link-gk158-0 ekGstm">developer guide</a>. Also we need some browser WebDriver. In this example we are going to test using Google Chrome browser. So we are installing the ChromeDriver. We use <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">cucumber-pretty</code> to make the output more verbose.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div> </div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>$ npm install --save-dev w3c-webdriver nightwatch cucumber chromedriver cucumber-pretty</code></pre></div><h3 id="step-2-configuring-nightwatch-js">Step 2- Configuring Nightwatch.js</h3><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Nightwatch.js requires a configuration to be able to start the correct WebDriver with the needed parameters. Create a JavaScript configuration file in the project root folder. We use <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">nightwatch.conf.js</code> instead of <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">nightwatch.json</code> for more flexibility. In the configuration file we provide the port we are going to use, set the browser name to &quot;Chrome&quot; and provide path for installed ChromeDriver. We don&#x27;t need to specify <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">src_folders</code> as test are running using Cucumber. Check out <a href="http://nightwatchjs.org/guide#settings-file" class="Link-gk158-0 ekGstm">Nightwatch docs</a> where all options are documented. Please note that not all of them are supported here.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>nightwatch.conf.js</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code><span style="color:#cc99cc">const</span> chromedriver = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;chromedriver&#x27;</span>);

<span style="color:#f99157">module</span>.exports = {
  <span class="hljs-attr">test_settings</span>: {
    <span class="hljs-attr">default</span>: {
      <span class="hljs-attr">webdriver</span>: {
        <span class="hljs-attr">start_process</span>: <span style="color:#f99157">true</span>,
        <span class="hljs-attr">server_path</span>: chromedriver.path,
        <span class="hljs-attr">port</span>: <span style="color:#f99157">4444</span>,
        <span class="hljs-attr">cli_args</span>: [<span style="color:#99cc99">&#x27;--port=4444&#x27;</span>]
      },
      <span class="hljs-attr">desiredCapabilities</span>: {
        <span class="hljs-attr">browserName</span>: <span style="color:#99cc99">&#x27;chrome&#x27;</span>
      }
    }
  }
};</code></pre></div><h3 id="step-3-configuring-cucumber">Step 3 - Configuring Cucumber</h3><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Cucumber also needs some configuration. Create a JavaScript configuration file called <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">cucumber-setup.js</code> in the project root folder. This file is responsible for setting up the default timeout, starting the WebDriver and creating the session.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>cucumber-setup.js</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code><span style="color:#cc99cc">const</span> { setDefaultTimeout, AfterAll, BeforeAll } = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;cucumber&#x27;</span>);
<span style="color:#cc99cc">const</span> { createSession, closeSession, startWebDriver, stopWebDriver } = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;w3c-webdriver&#x27;</span>);

setDefaultTimeout(<span style="color:#f99157">60000</span>);

BeforeAll(<span style="color:#cc99cc">async</span> () =&gt; {
  <span style="color:#cc99cc">await</span> startWebDriver();
  <span style="color:#cc99cc">await</span> createSession();
});

AfterAll(<span style="color:#cc99cc">async</span> () =&gt; {
  <span style="color:#cc99cc">await</span> closeSession();
  <span style="color:#cc99cc">await</span> stopWebDriver();
});</code></pre></div><h3 id="step-4-writing-a-feature-file">Step 4 - Writing a feature file</h3><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Let&#x27;s create our first feature file under <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">features</code> folder called <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">google.feature</code>.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>features/google.feature</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code><span style="color:#cc99cc">Feature</span>: Google Search

<span style="color:#cc99cc">Scenario</span>: Searching Google

  <span style="color:#cc99cc">Given</span> I open Google&#x27;s search page
  <span style="color:#cc99cc">Then</span> the title is <span style="color:#99cc99">&quot;Google&quot;</span>
  <span style="color:#cc99cc">And</span> the Google search form exists</code></pre></div><h3 id="step-5-writing-step-definitions">Step 5 - Writing step definitions</h3><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">For Cucumber to be able to understand and execute the feature file we need to create matching step definitions for every feature step we use in our feature file. Create a step definition file under <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">step-definitions</code> folder called <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">google.js</code>.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>step-definitions/google.js</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code><span style="color:#cc99cc">const</span> { client } = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;w3c-webdriver&#x27;</span>);
<span style="color:#cc99cc">const</span> { Given, Then, When } = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;cucumber&#x27;</span>);

Given(<span style="color:#f2777a">/^I open Google&#x27;s search page$/</span>, () =&gt; {
  <span style="color:#cc99cc">return</span> client.url(<span style="color:#99cc99">&#x27;http://google.com&#x27;</span>).waitForElementVisible(<span style="color:#99cc99">&#x27;body&#x27;</span>, <span style="color:#f99157">1000</span>);
});

Then(<span style="color:#f2777a">/^the title is &quot;([^&quot;]*)&quot;$/</span>, title =&gt; {
  <span style="color:#cc99cc">return</span> client.assert.title(title);
});

Then(<span style="color:#f2777a">/^the Google search form exists$/</span>, () =&gt; {
  <span style="color:#cc99cc">return</span> client.assert.visible(<span style="color:#99cc99">&#x27;input[name=&quot;q&quot;]&#x27;</span>);
});</code></pre></div><h3 id="step-6-creating-npm-script">Step 6 - Creating npm script</h3><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">For convenience we are creating an npm script in our <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">package.json</code> to be able to execute the test with a short command. You can choose any name for it.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>package.json</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>{
  ...
  <span class="hljs-attr">&quot;scripts&quot;</span>: {
    <span class="hljs-attr">&quot;e2e-test&quot;</span>: <span style="color:#99cc99">&quot;cucumber-js --require cucumber-setup.js --require step-definitions --format node_modules/cucumber-pretty&quot;</span>,
    ...
  }
  ...
}</code></pre></div><h3 id="step-7-run-the-tests">Step 7 - Run the tests</h3><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">We are ready to run our first test.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div> </div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>$ npm run e2e-test

&gt; w3c-webdriver-test@1.0.0 e2e-test /home/igor/test/w3c-webdriver-test
&gt; cucumber-js --require cucumber-setup.js --require step-definitions --format node_modules/cucumber-pretty


<span class="hljs-purple">Feature: </span>Google Search

<span class="hljs-purple">  Scenario:</span> Searching Google
    Given I open Google&#x27;s search page
<span class="hljs-green">√</span> Element &lt;body&gt; was visible after 96 milliseconds.
    Then the title is &quot;Google&quot;
<span class="hljs-green">√</span> Testing if the page title equals &quot;Google&quot;  - 18 ms.
    And the Google search form exists
<span class="hljs-green">√</span> Testing if element &lt;input[name=&quot;q&quot;]&gt; is visible  - 98 ms.

1 scenario (<span class="hljs-green">1 passed</span>)
3 steps (<span class="hljs-green">3 passed</span>)
0m02.263s</code></pre></div><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">For more examples check out the the <a href="https://github.com/mucsi96/w3c-webdriver/tree/master/packages/cucumber-example" class="Link-gk158-0 ekGstm">cucumber-example</a>
or <a href="https://github.com/mucsi96/w3c-webdriver/tree/master/packages/cucumber-selenium-example" class="Link-gk158-0 ekGstm">cucumber-selenium-example</a> projects.</p><h2 id="step-definition-handling" class="Heading__StyledHeading2-oer6k3-3 jcvskU"><a href="#step-definition-handling" aria-hidden="true" class="Heading__Anchor-oer6k3-0 eeuVlg"><svg class="Heading__StyledAnchorIcon-oer6k3-1 bzsWuf" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#8899A6" d="M15 9l6-6s6-6 12 0 0 12 0 12l-8 8s-6 6-12 0c-1.125-1.125-1.822-2.62-1.822-2.62l3.353-3.348S14.396 18.396 16 20c0 0 3 3 6 0l8-8s3-3 0-6-6 0-6 0l-3.729 3.729s-1.854-1.521-5.646-.354L15 9z"></path><path fill="#8899A6" d="M20.845 27l-6 6s-6 6-12 0 0-12 0-12l8-8s6-6 12 0c1.125 1.125 1.822 2.62 1.822 2.62l-3.354 3.349s.135-1.365-1.469-2.969c0 0-3-3-6 0l-8 8s-3 3 0 6 6 0 6 0l3.729-3.729s1.854 1.521 5.646.354l-.374.375z"></path></svg></a>Step definition handling</h2><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Step definitions which uses Nightwatch client should return the result of api call as it returns a Promise. Please note that this behavior is different from plain Nightwatch client API.</p><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>NOT OK</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>Given(/^I <span style="color:#cc99cc">open</span> Googl<span style="color:#99cc99">e&#x27;s search page$/, () =&gt; {
  client
    .url(&#x27;</span>http://google.com<span style="color:#99cc99">&#x27;)
    .waitForElementVisible(&#x27;</span>body<span style="color:#99cc99">&#x27;, 1000);
});</span></code></pre></div><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>OK</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>Given(/^I <span style="color:#cc99cc">open</span> Googl<span style="color:#99cc99">e&#x27;s search page$/, () =&gt; {
  return client
    .url(&#x27;</span>http://google.com<span style="color:#99cc99">&#x27;)
    .waitForElementVisible(&#x27;</span>body<span style="color:#99cc99">&#x27;, 1000);
});</span></code></pre></div><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>OK</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>Given(/^I <span style="color:#cc99cc">open</span> Googl<span style="color:#99cc99">e&#x27;s search page$/, async () =&gt; {
  await client
    .url(&#x27;</span>http://google.com<span style="color:#99cc99">&#x27;)
    .waitForElementVisible(&#x27;</span>body<span style="color:#99cc99">&#x27;, 1000);
});</span></code></pre></div><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>OK</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>Given(/^I <span style="color:#cc99cc">open</span> Googl<span style="color:#99cc99">e&#x27;s search page$/, () =&gt; {
  client.url(&#x27;</span>http://google.com<span style="color:#99cc99">&#x27;);

  return client.waitForElementVisible(&#x27;</span>body<span style="color:#99cc99">&#x27;, 1000);
});</span></code></pre></div><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>OK</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>Given(/^I <span style="color:#cc99cc">open</span> Googl<span style="color:#99cc99">e&#x27;s search page$/, async () =&gt; {
  client.url(&#x27;</span>http://google.com<span style="color:#99cc99">&#x27;);

  await client.waitForElementVisible(&#x27;</span>body<span style="color:#99cc99">&#x27;, 1000);
});</span></code></pre></div><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>OK Recommended</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>Given(/^I <span style="color:#cc99cc">open</span> Googl<span style="color:#99cc99">e&#x27;s search page$/, async () =&gt; {
  await client.url(&#x27;</span>http://google.com<span style="color:#99cc99">&#x27;);
  await client.waitForElementVisible(&#x27;</span>body<span style="color:#99cc99">&#x27;, 1000);
});</span></code></pre></div><h2 id="custom-reporters" class="Heading__StyledHeading2-oer6k3-3 jcvskU"><a href="#custom-reporters" aria-hidden="true" class="Heading__Anchor-oer6k3-0 eeuVlg"><svg class="Heading__StyledAnchorIcon-oer6k3-1 bzsWuf" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#8899A6" d="M15 9l6-6s6-6 12 0 0 12 0 12l-8 8s-6 6-12 0c-1.125-1.125-1.822-2.62-1.822-2.62l3.353-3.348S14.396 18.396 16 20c0 0 3 3 6 0l8-8s3-3 0-6-6 0-6 0l-3.729 3.729s-1.854-1.521-5.646-.354L15 9z"></path><path fill="#8899A6" d="M20.845 27l-6 6s-6 6-12 0 0-12 0-12l8-8s6-6 12 0c1.125 1.125 1.822 2.62 1.822 2.62l-3.354 3.349s.135-1.365-1.469-2.969c0 0-3-3-6 0l-8 8s-3 3 0 6 6 0 6 0l3.729-3.729s1.854 1.521 5.646.354l-.374.375z"></path></svg></a>Custom Reporters</h2><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">You can provide multiple reporters (formatters) for Cucumber. To generate an HTML view of your test reports, you can use
<a href="https://github.com/gkushang/cucumber-html-reporter" class="Link-gk158-0 ekGstm">cucumber-html-reporter</a>.</p><h3 id="step-1-installing-dependencies">Step 1 - Installing dependencies</h3><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div> </div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>$ npm install --save-dev cucumber-html-reporter mkdirp</code></pre></div><h3 id="step-2-create-a-cucumber-config-file">Step 2 - Create a cucumber config file</h3><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>cucumber.conf.js</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code><span style="color:#cc99cc">const</span> fs = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;fs&#x27;</span>);
<span style="color:#cc99cc">const</span> path = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;path&#x27;</span>);
<span style="color:#cc99cc">const</span> { setDefaultTimeout, After, AfterAll, BeforeAll } = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;cucumber&#x27;</span>);
<span style="color:#cc99cc">const</span> { createSession, closeSession, startWebDriver, stopWebDriver } = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;w3c-webdriver&#x27;</span>);
<span style="color:#cc99cc">const</span> reporter = <span style="color:#f99157">require</span>(<span style="color:#99cc99">&#x27;cucumber-html-reporter&#x27;</span>);

<span style="color:#cc99cc">const</span> attachedScreenshots = getScreenshots();

<span class="hljs-function"><span style="color:#cc99cc">function</span> <span style="color:#6699cc">getScreenshots</span>(<span style="color:#f99157"></span>) </span>{
  <span style="color:#cc99cc">try</span> {
    <span style="color:#cc99cc">const</span> folder = path.resolve(__dirname, <span style="color:#99cc99">&#x27;screenshots&#x27;</span>);

    <span style="color:#cc99cc">const</span> screenshots = fs.readdirSync(folder).map(<span class="hljs-function"><span style="color:#f99157">file</span> =&gt;</span> path.resolve(folder, file));
    <span style="color:#cc99cc">return</span> screenshots;
  } <span style="color:#cc99cc">catch</span> (err) {
    <span style="color:#cc99cc">return</span> [];
  }
}

setDefaultTimeout(<span style="color:#f99157">60000</span>);

BeforeAll(<span style="color:#cc99cc">async</span> () =&gt; {
  <span style="color:#cc99cc">await</span> startWebDriver({ <span class="hljs-attr">env</span>: process.env.NIGHTWATCH_ENV || <span style="color:#99cc99">&#x27;chromeHeadless&#x27;</span> });
  <span style="color:#cc99cc">await</span> createSession();
});

AfterAll(<span style="color:#cc99cc">async</span> () =&gt; {
  <span style="color:#cc99cc">await</span> closeSession();
  <span style="color:#cc99cc">await</span> stopWebDriver();
  setTimeout(<span class="hljs-function"><span style="color:#f99157">()</span> =&gt;</span> {
    reporter.generate({
      <span class="hljs-attr">theme</span>: <span style="color:#99cc99">&#x27;bootstrap&#x27;</span>,
      <span class="hljs-attr">jsonFile</span>: <span style="color:#99cc99">&#x27;report/cucumber_report.json&#x27;</span>,
      <span class="hljs-attr">output</span>: <span style="color:#99cc99">&#x27;report/cucumber_report.html&#x27;</span>,
      <span class="hljs-attr">reportSuiteAsScenarios</span>: <span style="color:#f99157">true</span>,
      <span class="hljs-attr">launchReport</span>: <span style="color:#f99157">true</span>,
      <span class="hljs-attr">metadata</span>: {
        <span style="color:#99cc99">&#x27;App Version&#x27;</span>: <span style="color:#99cc99">&#x27;0.3.2&#x27;</span>,
        <span style="color:#99cc99">&#x27;Test Environment&#x27;</span>: <span style="color:#99cc99">&#x27;POC&#x27;</span>
      }
    });
  }, <span style="color:#f99157">0</span>);
});

After(<span class="hljs-function"><span style="color:#cc99cc">function</span>(<span style="color:#f99157"></span>) </span>{
  <span style="color:#cc99cc">return</span> <span style="color:#f99157">Promise</span>.all(
    getScreenshots()
      .filter(<span class="hljs-function"><span style="color:#f99157">file</span> =&gt;</span> !attachedScreenshots.includes(file))
      .map(<span class="hljs-function"><span style="color:#f99157">file</span> =&gt;</span> {
        attachedScreenshots.push(file);
        <span style="color:#cc99cc">return</span> <span style="color:#cc99cc">this</span>.attach(fs.readFileSync(file), <span style="color:#99cc99">&#x27;image/png&#x27;</span>);
      })
  );
});</code></pre></div><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">For details on available options for report generation, see the
<a href="https://github.com/gkushang/cucumber-html-reporter#usage" class="Link-gk158-0 ekGstm">Cucumber HTML Reporter documentation</a>.</p><h3 id="step-3-update-your-npm-scripts">Step 3 - Update your npm scripts</h3><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div>package.json</div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>{
   ...
   <span style="color:#99cc99">&quot;scripts&quot;</span>: {
       <span style="color:#99cc99">&quot;e2e-test&quot;</span>: <span style="color:#99cc99">&quot;mkdirp report &amp;&amp; cucumber-js --require cucumber-setup.js --require step-definitions --format node_modules/cucumber-pretty --format json:report/cucumber_report.json&quot;</span>,
       ...
   }
   ...
}</code></pre></div><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Notice we have added the <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">json</code> formatter. This generates a JSON
report which is used by <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">cucumber-html-reporter</code> to generate the HTML report.
We use <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">mkdirp</code> to make sure <code class="InlineCode__StyledInlineCode-pe127r-0 cQGkde">report</code> folder exists before running the test.</p><h3 id="step-4-run-the-tests">Step 4 - Run the tests</h3><div class="Code__CodeWrapper-picg8i-0 XKgNx"><div class="Code__WindowTitle-picg8i-4 cGaljh"><div class="Code__WindowButtonsWrapper-picg8i-3 dofKEl"><span type="close" class="Code__WindowButton-picg8i-2 dLmUcp"></span><span type="minimize" class="Code__WindowButton-picg8i-2 hogQlB"></span><span type="maximize" class="Code__WindowButton-picg8i-2 bUHJIA"></span></div> </div><pre class="Code__StyledSyntaxHighlighter-picg8i-1 gDTGaH" style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code>$ npm run e2e-test</code></pre></div><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">When the test run completes, the HTML report is displayed in a new browser tab.</p><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">Example reports are available in the
<a href="https://github.com/gkushang/cucumber-html-reporter#preview-of-html-reports" class="Link-gk158-0 ekGstm">Cucumber HTML Reporter documentation</a>.</p><p class="Paragraph__StyledParagraph-sc-1efu9re-0 koURsI">For working example check out the <a href="https://github.com/mucsi96/w3c-webdriver/tree/master/packages/cucumber-example" class="Link-gk158-0 ekGstm">cucumber-example</a> in the repository.</p></article></main><div data-react-rehydrate-key="table-of-contents" class="Site__TableOfContentsContainer-zzx35d-1 wHKmQ"><div class="TableOfContents__Wrapper-wgfebw-0 fltzxZ"><a href="/" class="HomeLink__StyledHomeLink-sc-15k1ajn-0 idFeQr"><strong>W3C WebDriver</strong><div>v0.14.0</div></a><div class="SearchField__Wrapper-l8gm09-0 chxjBI"><label for="search-field" class="label">Search docs</label><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 224 224"><path d="M94.08 13.44c-42.105 0-76.16 34.055-76.16 76.16s34.055 76.16 76.16 76.16c15.033 0 28.945-4.41 40.74-11.9l55.02 55.02 19.04-19.04-54.32-54.18c9.765-12.81 15.68-28.683 15.68-46.06 0-42.105-34.055-76.16-76.16-76.16zm0 17.92c32.252 0 58.24 25.988 58.24 58.24s-25.988 58.24-58.24 58.24c-32.253 0-58.24-25.988-58.24-58.24s25.987-58.24 58.24-58.24z" fill="currentColor"></path></svg><input type="search" id="search-field" placeholder="Search docs"/></div><nav class="TableOfContents__Navigation-wgfebw-1 dZJAAP"><ol><li><a href="/" class="TableOfContentsNode__Link-sc-19a47gy-0 gyVCXr">Introduction</a></li><li><a href="/api" class="TableOfContentsNode__Link-sc-19a47gy-0 gyVCXr">API</a></li><li><a href="/cucumber" class="TableOfContentsNode__Link-sc-19a47gy-0 bwxRPa">Using with Cucumber</a><ol><li><a href="#getting-started" class="TableOfContentsNode__Link-sc-19a47gy-0 gyVCXr">Getting Started</a></li><li><a href="#step-definition-handling" class="TableOfContentsNode__Link-sc-19a47gy-0 gyVCXr">Step definition handling</a></li><li><a href="#custom-reporters" class="TableOfContentsNode__Link-sc-19a47gy-0 gyVCXr">Custom Reporters</a></li></ol></li><li><a href="https://github.com/mucsi96/w3c-webdriver" class="TableOfContentsNode__Link-sc-19a47gy-0 gyVCXr">GitHub</a></li></ol></nav></div></div><footer class="Footer__StyledFooter-sc-1ofq597-2 jTfAdQ"><div>Created with <svg class="Footer__StyledHeart-sc-1ofq597-0 kzTKuX" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#DD2E44" d="M35.885 11.833c0-5.45-4.418-9.868-9.867-9.868-3.308 0-6.227 1.633-8.018 4.129-1.791-2.496-4.71-4.129-8.017-4.129-5.45 0-9.868 4.417-9.868 9.868 0 .772.098 1.52.266 2.241C1.751 22.587 11.216 31.568 18 34.034c6.783-2.466 16.249-11.447 17.617-19.959.17-.721.268-1.469.268-2.242z"></path></svg> in <svg class="Footer__StyledCH-sc-1ofq597-1 jsZMYE" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path fill="#D32D27" d="M31 27a4 4 0 0 1-4 4H9a4 4 0 0 1-4-4V9a4 4 0 0 1 4-4h18a4 4 0 0 1 4 4v18z"></path><path fill="#FFF" d="M25 16.063h-5v-5h-4v5h-5V20h5v5.063h4V20h5z"></path></svg></div><div>2018 - 2019</div></footer><script>window.__REHYDRATION_INITIAL_STATE__ = JSON.parse('{"table-of-contents":{"title":"W3C WebDriver","description":"WebDriver client for JavaScript","url":"https://w3c-webdriver.netlify.com/","github":"https://github.com/mucsi96/w3c-webdriver","path":"/cucumber","tableOfContentsItems":[{"url":"/","level":1,"title":"Introduction"},{"url":"/api","level":1,"title":"API"},{"url":"/cucumber","level":1,"title":"Using with Cucumber"},{"url":"#getting-started","level":2,"title":"Getting Started"},{"url":"#step-definition-handling","level":2,"title":"Step definition handling"},{"url":"#custom-reporters","level":2,"title":"Custom Reporters"},{"url":"https://github.com/mucsi96/w3c-webdriver","level":1,"title":"GitHub"}]}}')</script><div id="app"></div><script async="" defer="" src="/site-client.js"></script></body></html>